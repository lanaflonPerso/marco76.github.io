---
title: Better performance with smaller and faster Angular applications using Spring Boot and Tomcat
date: 2017-02-20T22:45:17+00:00
author: Marco Molteni
layout: post
permalink: /2017/02/20/better-performance-with-smaller-and-faster-angular-applications-using-spring-boot-and-tomcat/
image: /wp-content/uploads/2017/03/header-springboot-100x23.png
main-class: 'spring'
color: '#7AAB13'
categories:
  - Angular
  - AngularJS
  - java
  - performance
  - Spring
  - Spring Boot
tags:
  - Angular
  - Java
  - Spring
---
<div id="cs-content" class="cs-content">
  <div id="x-section-1"  class="x-section"  style="margin: 0px;padding: 45px 0px; background-color: transparent;"   >
    <div  class="x-container max width"  style="margin: 0px auto;padding: 0px;"   >
      <div  class="x-column x-sm x-1-1" style="padding: 0px;" >
        <div  class="x-text"    >
          <p>
            <strong>Problem: </strong>the size of our Angular application is too big and it takes too much time to download. How to reduce the size of the application?
          </p>
          
          <p>
            <strong>Solution:</strong> one of the most common solutions is to use <a href="https://webpack.github.io">webpack</a> that optimise our code and reduce eliminates the useless libraries and empty spaces. A second important help can come from our <strong>webserver</strong>, the browsers can open <strong>compressed files</strong> (<a href="https://en.wikipedia.org/wiki/HTTP_compression">HTTP compression</a>). This could have an huge impact when our application is accessed by browser located in different continents with big latency.
          </p>
          
          <p>
            Apache and Ngix allow easily to compress your static content and send it to the client browser if this is able to handle gzip files. How to do the same in <strong>Tomcat</strong>?
          </p>
          
          <p>
            Tomcat allows to configure the compression through the server.xml file, e.g.:
          </p>
        </div>
      </div>
    </div>
    
    <div  class="x-container max width"  style="margin: 0px auto;padding: 0px;"   >
      <div  class="x-column x-sm x-1-1" style="padding: 0px;" >
        <blockquote  class="x-blockquote" >
          We reduced the size of the application from 2.1 MB to 876 KB
        </blockquote>
        
        <pre  class="x-code" ><code>&lt;Connector port="8080"
         compression="on"
         compressionMinSize="2048"
         compressableMimeType=
            "text/html,text/xml,text/plain,
              text/css,text/javascript,text/json,
             application/x-javascript,
             application/javascript,application/json"/&gt;
</code></pre>
        
        <div  class="x-text"    >
          <p>
            &#8230; ok but we are using Spring Boot with Tomcat Embedded &#8230; no problem ;), here an example of implementation:
          </p>
        </div>
        
        <pre  class="x-code" ><code>@Component
public class TomcatCustomizer 
        implements EmbeddedServletContainerCustomizer {

        private static String mimeTypes[] = {"text/html", 
             "text/plain", "text/xml", "text/css", "text/javascript", 
             "application/javascript"};

        @Override
        public void customize(ConfigurableEmbeddedServletContainer 
            configurableEmbeddedServletContainer) {

            Compression compression = new Compression();
            compression.setEnabled(true);

            compression.setMimeTypes(mimeTypes);
            configurableEmbeddedServletContainer
                .setCompression(compression);
    }
}</code></pre>
        
        <div  class="x-text"    >
          <p>
            Adding this code to our example application online: http://angular.cafe we reduce the size of the application transferred from <span style="color: #0000ff;">2.6 MB</span> to<span style="color: #0000ff;"> 876 kb</span>. The vendor.js file generated by webpack is less than 30% the size of the original (from 2.1 MB to 572 kb).
          </p>
          
          <p>
            Here the new size of the website after the change:
          </p>
        </div>
        
        <img  class="x-img x-img-none"  src="https://i0.wp.com/javaee.ch/wp-content/uploads/2017/02/compress.png"  data-recalc-dims="1" />
        
        <div  class="x-text"    >
          <p>
            Here the results showed by Mozilla, we can see the transferred size and the real size of the files:
          </p>
        </div>
        
        <img  class="x-img x-img-none"  src="https://i1.wp.com/javaee.ch/wp-content/uploads/2017/02/compress_mozilla.png"  data-recalc-dims="1" />
        
        <div  class="x-text"    >
          <p>
            Here the screenshots before the Http compression:
          </p>
        </div>
        
        <img  class="x-img x-img-none"  src="https://i1.wp.com/javaee.ch/wp-content/uploads/2017/02/compress_2_6.png"  data-recalc-dims="1" /><img  class="x-img x-img-none"  src="https://i0.wp.com/javaee.ch/wp-content/uploads/2017/02/firefox_or.png"  data-recalc-dims="1" />
      </div>
    </div>
  </div>
</div>